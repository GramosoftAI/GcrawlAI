<h3 align="center">
  <a name="readme-top"></a>
  <img
    src="https://raw.githubusercontent.com/GramosoftAI/GcrawlAI/refs/heads/dev/feature/img/Crawl%20Logo.svg"
    height="200"
  >
</h3>

<div align="center">
  <a href="#">
    <svg xmlns="http://www.w3.org/2000/svg" width="108" height="20" role="img" aria-label="license: AGPL-3.0"><title>license: AGPL-3.0</title><linearGradient id="s" x2="0" y2="100%"><stop offset="0" stop-color="#bbb" stop-opacity=".1"/><stop offset="1" stop-opacity=".1"/></linearGradient><clipPath id="r"><rect width="108" height="20" rx="3" fill="#fff"/></clipPath><g clip-path="url(#r)"><rect width="47" height="20" fill="#555"/><rect x="47" width="61" height="20" fill="#fe7d37"/><rect width="108" height="20" fill="url(#s)"/></g><g fill="#fff" text-anchor="middle" font-family="Verdana,Geneva,DejaVu Sans,sans-serif" text-rendering="geometricPrecision" font-size="110"><text aria-hidden="true" x="245" y="150" fill="#010101" fill-opacity=".3" transform="scale(.1)" textLength="370">license</text><text x="245" y="140" transform="scale(.1)" fill="#fff" textLength="370">license</text><text aria-hidden="true" x="765" y="150" fill="#010101" fill-opacity=".3" transform="scale(.1)" textLength="510">AGPL-3.0</text><text x="765" y="140" transform="scale(.1)" fill="#fff" textLength="510">AGPL-3.0</text></g></svg>
  </a>
  <a href="#">
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="102" height="20"><linearGradient id="s" x2="0" y2="100%"><stop offset="0" stop-color="#bbb" stop-opacity=".1"/><stop offset="1" stop-opacity=".1"/></linearGradient><clipPath id="r"><rect width="102" height="20" rx="3" fill="#fff"/></clipPath><g clip-path="url(#r)" transform="scale(1)"><rect width="69" height="20" fill="#555"/><rect x="69" width="33" height="20" fill="#007ec6"/><rect width="102" height="20" fill="url(#s)"/></g><g fill="#fff" text-anchor="middle" font-family="Verdana,Geneva,DejaVu Sans,sans-serif" text-rendering="geometricPrecision" font-size="110" transform="scale(1)"><image xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" visibility="hidden" x="5" y="3" width="14" height="14" xlink:href=""/><text x="355" y="150" fill="#010101" fill-opacity=".3" transform="scale(.1)" textLength="590">downloads</text><text x="355" y="140" transform="scale(.1)" textLength="590">downloads</text><text x="845" y="150" fill="#010101" fill-opacity=".3" transform="scale(.1)" textLength="150">40</text><text x="845" y="140" transform="scale(.1)" textLength="150">40</text></g></svg>
  </a>
  <a href="#">
    <svg xmlns="http://www.w3.org/2000/svg" width="108" height="20" role="img" aria-label="contributors: 130"><title>contributors: 3</title><linearGradient id="s" x2="0" y2="100%"><stop offset="0" stop-color="#bbb" stop-opacity=".1"/><stop offset="1" stop-opacity=".1"/></linearGradient><clipPath id="r"><rect width="108" height="20" rx="3" fill="#fff"/></clipPath><g clip-path="url(#r)"><rect width="77" height="20" fill="#555"/><rect x="77" width="31" height="20" fill="#4c1"/><rect width="108" height="20" fill="url(#s)"/></g><g fill="#fff" text-anchor="middle" font-family="Verdana,Geneva,DejaVu Sans,sans-serif" text-rendering="geometricPrecision" font-size="110"><text aria-hidden="true" x="395" y="150" fill="#010101" fill-opacity=".3" transform="scale(.1)" textLength="670">contributors</text><text x="395" y="140" transform="scale(.1)" fill="#fff" textLength="670">contributors</text><text aria-hidden="true" x="915" y="150" fill="#010101" fill-opacity=".3" transform="scale(.1)" textLength="210">3</text><text x="915" y="140" transform="scale(.1)" fill="#fff" textLength="210">3</text></g></svg>
  </a>
  <a href="#">
    <svg xmlns="http://www.w3.org/2000/svg" width="114" height="20" role="img" aria-label="Visit: gcrawl.ai"><title>Visit: gcrawl.ai</title><linearGradient id="s" x2="0" y2="100%"><stop offset="0" stop-color="#bbb" stop-opacity=".1"/><stop offset="1" stop-opacity=".1"/></linearGradient><clipPath id="r"><rect width="114" height="20" rx="3" fill="#fff"/></clipPath><g clip-path="url(#r)"><rect width="33" height="20" fill="#555"/><rect x="33" width="81" height="20" fill="#fe7d37"/><rect width="114" height="20" fill="url(#s)"/></g><g fill="#fff" text-anchor="middle" font-family="Verdana,Geneva,DejaVu Sans,sans-serif" text-rendering="geometricPrecision" font-size="110"><text aria-hidden="true" x="175" y="150" fill="#010101" fill-opacity=".3" transform="scale(.1)" textLength="230">Visit</text><text x="175" y="140" transform="scale(.1)" fill="#fff" textLength="230">Visit</text><text aria-hidden="true" x="725" y="150" fill="#010101" fill-opacity=".3" transform="scale(.1)" textLength="710">gcrawl.ai</text><text x="725" y="140" transform="scale(.1)" fill="#fff" textLength="710">gcrawl.ai</text></g></svg>
  </a>
</div>

<div>
  <p align="center">
    <a href="#">
      <svg xmlns="http://www.w3.org/2000/svg" width="135.75" height="28" role="img" aria-label="FOLLOW ON X"><title>FOLLOW ON X</title><g shape-rendering="crispEdges"><rect width="135.75" height="28" fill="#000000"/></g><g fill="#fff" text-anchor="middle" font-family="Verdana,Geneva,DejaVu Sans,sans-serif" text-rendering="geometricPrecision" font-size="100"><image x="9" y="7" width="14" height="14" href="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJ3aGl0ZSIgcm9sZT0iaW1nIiB2aWV3Qm94PSIwIDAgMjQgMjQiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PHRpdGxlPlg8L3RpdGxlPjxwYXRoIGQ9Ik0xNC4yMzQgMTAuMTYyIDIyLjk3NyAwaC0yLjA3MmwtNy41OTEgOC44MjRMNy4yNTEgMEguMjU4bDkuMTY4IDEzLjM0M0wuMjU4IDI0SDIuMzNsOC4wMTYtOS4zMThMMTYuNzQ5IDI0aDYuOTkzem0tMi44MzcgMy4yOTktLjkyOS0xLjMyOUwzLjA3NiAxLjU2aDMuMTgybDUuOTY1IDguNTMyLjkyOSAxLjMyOSA3Ljc1NCAxMS4wOWgtMy4xODJ6Ii8+PC9zdmc+"/><text transform="scale(.1)" x="778.75" y="175" textLength="917.5" fill="#fff" font-weight="bold">FOLLOW ON X</text></g></svg>
    </a>
    <a href="#">
      <svg xmlns="http://www.w3.org/2000/svg" width="174.5" height="28" role="img" aria-label="FOLLOW ON LINKEDIN"><title>FOLLOW ON LINKEDIN</title><g shape-rendering="crispEdges"><rect width="174.5" height="28" fill="#0077b5"/></g><g fill="#fff" text-anchor="middle" font-family="Verdana,Geneva,DejaVu Sans,sans-serif" text-rendering="geometricPrecision" font-size="100"><text transform="scale(.1)" x="872.5" y="175" textLength="1505" fill="#fff" font-weight="bold">FOLLOW ON LINKEDIN</text></g></svg>
    </a>
  </p>
</div>

---

# Web Crawler API & Dashboard

A comprehensive web crawling solution featuring a FastAPI backend, Streamlit dashboard, and distributed task processing with Celery and Redis.

## ğŸš€ Features

- **Dual Mode Crawling**:
  - **Single Page**: Direct, real-time crawling of individual pages.
  - **Full Site**: Distributed crawling of entire websites using Celery workers.
- **Advanced Extraction**:
  - Markdown conversion for LLM consumption.
  - HTML & Screenshot capture.
  - SEO metadata extraction (Title, Description, Keywords).
- **Stealth & Anti-Blocking**:
  - Uses Playwright with stealth plugins to bypass bot detection.
  - Automatic fallback strategies (Chromium -> Firefox/Camoufox).
- **Real-time Updates**:
  - Live progress tracking via WebSockets.
  - Interactive Streamlit dashboard.
- **Authentication**:
  - JWT-based authentication.
  - Email OTP for signup/verification.
  - Password reset flow.

## ğŸ› ï¸ Technology Stack

- **Backend**: FastAPI, Python 3.9+
- **Frontend**: Streamlit
- **Database**: PostgreSQL
- **Task Queue**: Celery + Redis
- **Browser Automation**: Playwright
- **Authentication**: JWT, BCrypt

## ğŸ“‹ Prerequisites

- **Python 3.9+**
- **PostgreSQL** (running on default port 5432)
- **Redis** (running on default port 6379)
- **Git**

## âš™ï¸ Installation

1. **Clone the repository**

   ```bash
   git clone https://github.com/GramosoftAI/GcrawlAI.git
   cd GcrawlAI
   ```

2. **Create and activate virtual environment**

   ```bash
   python -m venv venv
   source venv/bin/activate  # Linux/Mac
   venv\Scripts\activate     # Windows
   ```

3. **Install dependencies**

   ```bash
   pip install -r requirements.txt
   ```

4. **Install Playwright browsers**
   ```bash
   playwright install
   ```

## ğŸ”§ Configuration

1. **Database Config**: Update `config.yaml` with your PostgreSQL credentials.

   ```yaml
   postgres:
     host: "localhost"
     port: 5432
     database: "crawlerdb"
     user: "postgres"
     password: "your_password"
   ```

2. **Initialize Database Tables**:
   ```bash
   python -m api.db_setup
   # OR
   python api/db_setup.py
   ```

## ï¿½â€â™‚ï¸ Running the Application

You need to run 4 separate processes. It's recommended to use separate terminal windows.

**1. Start Redis Server** (if not running as a service)

```bash
redis-server
```

Note: Redis server will not run on windows, so use WSL for running redis server. or use docker.

**2. Start Celery Worker**

```bash
# Linux (User Recommended)
celery -A web_crawler.celery_config worker -l info

# Windows
celery -A web_crawler.celery_config.celery_app worker --loglevel=info --pool=solo
```

**3. Start Backend API**

```bash
# Windows / Development
uvicorn api.api:app --reload --port 8000

# Linux / Production (User Recommended)
uvicorn api.api:app --host 0.0.0.0 --port 8000 --workers 4 --timeout-keep-alive 120
```

API Docs will be available at: http://localhost:8000/docs

**4. Start Frontend Dashboard**

```bash
cd web_crawler
streamlit run streamlit_app.py
```

Dashboard will be available at: http://localhost:8501

## ï¿½ Project Structure

```
.
â”œâ”€â”€ api/                    # FastAPI backend
â”‚   â”œâ”€â”€ api.py              # Main API entry point
â”‚   â”œâ”€â”€ auth_manager.py     # Authentication logic
â”‚   â””â”€â”€ db_setup.py         # Database initialization
â”œâ”€â”€ web_crawler/            # Crawler logic
â”‚   â”œâ”€â”€ web_crawler.py      # Core crawler orchestrator
â”‚   â”œâ”€â”€ page_crawler.py     # Individual page processing
â”‚   â”œâ”€â”€ streamlit_app.py    # Frontend dashboard
â”‚   â””â”€â”€ celery_config.py    # Celery configuration
â”œâ”€â”€ config.yaml             # Application configuration
â””â”€â”€ requirements.txt        # Python dependencies
```

## ğŸ” API Endpoints

- `POST /crawler`: Start a new crawl job (single or all).
- `GET /crawler/status/{task_id}`: Check Celery task status.
- `GET /crawl/markdown`: Retrieve generated markdown.
- `POST /auth/signup/send-otp`: reliable email-based signup.
- `POST /auth/signup/verify-otp`: reliable email-based signup.
- `POST /auth/signin`: reliable email-based signin.
- `POST /auth/forgot-password`: reliable email-based forgot password.
- `POST /auth/reset-password`: reliable email-based reset password.
